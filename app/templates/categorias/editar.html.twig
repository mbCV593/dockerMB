{% extends 'base.html.twig' %}

{% block title %}Editar Categor√≠a - Sistema de Inventario{% endblock %}

{% block body %}
    <h1>üìù Editar Categor√≠a</h1>
    
    <div style="margin-bottom: 20px;">
        <a href="{{ path('categorias_index') }}" style="text-decoration: none; color: #007bff;">‚Üê Volver a Categor√≠as</a>
    </div>

    {# Mostrar mensajes flash #}
    {% for message in app.flashes('success') %}
        <div style="background: #d4edda; color: #155724; padding: 10px; border: 1px solid #c3e6cb; border-radius: 4px; margin-bottom: 15px;">
            ‚úì {{ message }}
        </div>
    {% endfor %}

    {% for message in app.flashes('error') %}
        <div style="background: #f8d7da; color: #721c24; padding: 10px; border: 1px solid #f5c6cb; border-radius: 4px; margin-bottom: 15px;">
            ‚úó {{ message }}
        </div>
    {% endfor %}

    <form method="POST" action="{{ path('categorias_actualizar', {id: categoria.getId}) }}" style="max-width: 600px; background: #f8f9fa; padding: 30px; border-radius: 8px; border: 1px solid #dee2e6;">
        
        <div style="margin-bottom: 15px; padding: 10px; background: #e9ecef; border-radius: 4px;">
            <strong>ID:</strong> {{ categoria.getId }}
            <br>
            <strong>Fecha de creaci√≥n:</strong> {{ categoria.getFechaCreacion|date('d/m/Y H:i', 'America/Guatemala') }}
            {% if categoria.getFechaActualizacion %}
                <br>
                <strong>√öltima actualizaci√≥n:</strong> {{ categoria.getFechaActualizacion|date('d/m/Y H:i', 'America/Guatemala') }}
            {% endif %}
        </div>

        <div style="margin-bottom: 20px;">
            <label for="nombre" style="display: block; margin-bottom: 5px; font-weight: bold;">Nombre de la Categor√≠a *</label>
            <input 
                type="text" 
                id="nombre" 
                name="nombre" 
                required 
                maxlength="100"
                value="{{ categoria.getNombre }}"
                style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; font-size: 14px;"
                placeholder="Ej: Electr√≥nicos, Oficina, Deportes..."
            >
            <small style="color: #666; font-size: 12px;">M√°ximo 100 caracteres</small>
        </div>

        <div style="margin-bottom: 20px;">
            <label for="descripcion" style="display: block; margin-bottom: 5px; font-weight: bold;">Descripci√≥n</label>
            <textarea 
                id="descripcion" 
                name="descripcion" 
                rows="4"
                style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; font-size: 14px; resize: vertical;"
                placeholder="Descripci√≥n opcional de la categor√≠a..."
            >{{ categoria.getDescripcion ?? '' }}</textarea>
            <small style="color: #666; font-size: 12px;">Descripci√≥n opcional</small>
        </div>

        <div style="margin-bottom: 30px;">
            <label style="display: block; margin-bottom: 5px; font-weight: bold;">Estado</label>
            <div style="display: flex; align-items: center; gap: 10px;">
                <label style="display: flex; align-items: center; gap: 5px; font-weight: normal;">
                    <input 
                        type="radio" 
                        name="activo" 
                        value="1" 
                        {{ categoria.isActivo ? 'checked' : '' }}
                        style="margin: 0;"
                    >
                    <span style="color: #28a745;">‚úì Activa</span>
                </label>
                <label style="display: flex; align-items: center; gap: 5px; font-weight: normal;">
                    <input 
                        type="radio" 
                        name="activo" 
                        value="0" 
                        {{ not categoria.isActivo ? 'checked' : '' }}
                        style="margin: 0;"
                    >
                    <span style="color: #dc3545;">‚úó Inactiva</span>
                </label>
            </div>
        </div>

        <div style="display: flex; gap: 10px;">
            <button 
                type="submit" 
                style="background: #007bff; color: white; padding: 12px 24px; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; font-weight: bold;"
            >
                üíæ Guardar Cambios
            </button>
            
            <a 
                href="{{ path('categorias_index') }}" 
                style="background: #6c757d; color: white; padding: 12px 24px; border: none; border-radius: 4px; text-decoration: none; display: inline-block; font-size: 14px; font-weight: bold;"
            >
                ‚úó Cancelar
            </a>
        </div>
        
        <div style="margin-top: 15px; font-size: 12px; color: #666;">
            * Campos obligatorios
        </div>
    </form>

    <style>
        button:hover {
            background: #0056b3 !important;
        }
        
        input:focus, textarea:focus {
            border-color: #007bff !important;
            outline: none;
            box-shadow: 0 0 5px rgba(0,123,255,.3);
        }

        input[type="radio"] {
            accent-color: #007bff;
        }
    </style>
{% endblock %}
